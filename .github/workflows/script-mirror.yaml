name: Repo sync with Cloud π Native

on:
  push:
    branches:
      - "dev"
  workflow_dispatch:

jobs:
  mirror:
    name: Sync repo with Cloud π Native
    runs-on: self-hosted
    steps:
      - name: Checks-out repository
        uses: actions/checkout@v3
      - name: Send a sync request to DSO api
        run: |
          curl -X POST --fail -F token=glptt-cf33f7da0288d44bb6c9bcf8b9c2a0d7ec9edce3 -F ref=main --form "variables[GIT_BRANCH_DEPLOY]=dev" --form "variables[PROJECT_NAME]=canel2-front" https://gitlab.apps.c6.numerique-interieur.com/api/v4/projects/31/trigger/pipeline

# jobs:
#   mirror:
#     name: Sync repo with Cloud π Native
#     runs-on: ubuntu-latest
#     steps:
#       - name: Checks-out repository
#         uses: actions/checkout@v3
#       - name: Send a sync request to DSO api
#         run: |
#           sh ./path/to/script-mirror.sh \
#             -a ${{ secrets.API_DOMAIN }} \
#             -g ${{ secrets.GITLAB_TRIGGER_TOKEN }} \
#             -k ${{ secrets.CONSUMER_KEY }} \
#             -s ${{ secrets.CONSUMER_SECRET }}
